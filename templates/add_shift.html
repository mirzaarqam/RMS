<!-- templates/add_shift.html -->
{% extends "base.html" %}

{% block content %}
<h2>Add Shift</h2>
<form method="POST" action="{{ url_for('add_shift') }}">
    <div class="form-group">
        <label>Shift Type:</label>
        <select id="shift-type" name="type" required>
            <option value="full">Full Day (6/8 hours)</option>
            <option value="half">Half Day (3/4 hours)</option>
        </select>
    </div>

    <div class="form-group">
        <label>Duration:</label>
        <select id="duration" name="duration" required>
            <!-- Options populated dynamically -->
        </select>
    </div>

    <div class="form-group">
        <label>Shift Name:</label>
        <input type="text" name="shift_name" required>
    </div>

    <div class="form-group">
        <label>Shift Code:</label>
        <input type="text" name="shift_code" required>
    </div>

    <div class="form-group">
        <label>Shift Start:</label>
        <select id="shift-start" name="shift_start" required>
            {% for hour in range(24) %}
                <option value="{{ '%02d' % hour }}:00">{{ '%02d' % hour }}:00</option>
            {% endfor %}
        </select>
    </div>

    <div class="form-group">
        <label>Shift End:</label>
        <select id="shift-end" name="shift_end" required>
            {% for hour in range(24) %}
                <option value="{{ '%02d' % hour }}:00">{{ '%02d' % hour }}:00</option>
            {% endfor %}
        </select>
    </div>

    <button type="submit">Add Shift</button>
</form>

<script>
document.getElementById('shift-type').addEventListener('change', function() {
    const duration = document.getElementById('duration');
    duration.innerHTML = '';

    if (this.value === 'full') {
        [6, 8].forEach(hours => {
            const option = document.createElement('option');
            option.value = hours;
            option.textContent = `${hours} hours`;
            duration.appendChild(option);
        });
    } else {
        [3, 4].forEach(hours => {
            const option = document.createElement('option');
            option.value = hours;
            option.textContent = `${hours} hours`;
            duration.appendChild(option);
        });
    }
});

// Initialize on page load
document.getElementById('shift-type').dispatchEvent(new Event('change'));
</script>
{% endblock %}